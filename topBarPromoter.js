/*
 * Top Bar Promoter v1.1
 *
 * Copyright 2013, LambertGroup
 * 
 */

(function(b){function G(a){var c;c=document.cookie;var b=c.indexOf(" "+a+"=");-1==b&&(b=c.indexOf(a+"="));-1==b?c=null:(b=c.indexOf("=",b)+1,a=c.indexOf(";",b),-1==a&&(a=c.length),c=unescape(c.substring(b,a)));return null!=c&&""!=c?!0:!1}function r(a){var b=!1;a=a.substr(a.length-4).toLowerCase();if(".jpg"==a||".png"==a||".gif"==a)b=!0;return b}function D(a){"_blank"==b(a).attr("data-target")?window.open(b(a).attr("data-link")):window.location=b(a).attr("data-link")}function E(a,c,g){c=b("body").css("margin-top"); -1!=c.lastIndexOf("px")?(c=c.substr(0,c.lastIndexOf("px")),c=parseInt(c,10)+a.height,c+="px"):-1!=c.lastIndexOf("em")&&(c=c.substr(0,c.lastIndexOf("em")),c=parseInt(c,10)+0.063(a.height),c+="em");b("body").css({"margin-top":c})}function B(a,c){var g=b(window).height(),d=a.selectorItemsHeight,g=parseInt(g-a.height-10,10),d=0<a.selectorItemsHeight&&a.selectorItemsHeight<g?a.selectorItemsHeight:g;c.css({height:d+"px"})}function F(a,c,g,d,p,r,s,u,l){if(a.responsive){u.html("");var t=b(window).width(); g=b(window).height();if(0<a.siteGridWidth){var v="100%";t>a.siteGridWidth&&(v=a.siteGridWidth+"px");c.css({width:v})}c="";770>t?(a.selectorLeftPos=7,c="none"):(a.selectorLeftPos=a.selectorLeftPosOrig,c="block");d.css({display:c});s.css({left:+a.selectorLeftPos+"px"});c=600>t?"none":a.showShare?"block":"none";p.css({display:c});c=500>t?"none":"block";r.css({display:c});u.css({display:c});d=a.selectorItemsHeight;d=parseInt(g-a.height-10,10);d=0<a.selectorItemsHeight&&a.selectorItemsHeight<d?a.selectorItemsHeight: d;l.css({height:d+"px"})}}b.fn.topBarPromoter=function(a){a=b.extend({},b.fn.topBarPromoter.defaults,a);return this.each(function(){var c=b(this),g=c.attr("id"),d=b("<div></div>").addClass("topBarPromoter");c.wrap(d);var p=c.parent(),z=b(".topBarPromoterLogo",c),s=b(".shareIcons",c),u=b(".close_btn",c),l=b(".open_btn",c),t=b(".the_offers_selector",c),d=b(".dropDownText",c),v=b(".dropDownArrow",c),w=b(".preview_offer",c),h=b(".the_offers_div",c),k=b(".the_offers",c),x=b("body").css("margin-top");G(g)&& 0<a.cookieExpirationMinutes?p.css({display:"none"}):E(a,x,x);a.hideTopBarOnInit&&0<a.cookieExpirationMinutes&&(a.hideTopBarOnInit=!1);a.previewWidthOrig=a.previewWidth;a.selectorLeftPosOrig=a.selectorLeftPos;var m=navigator.userAgent.toLowerCase();if(-1!=m.indexOf("ipad")||-1!=m.indexOf("iphone")||-1!=m.indexOf("ipod")||-1!=m.indexOf("webos")||-1!=m.indexOf("android"))a.openListOnClick=!0;for(var n=a.theElements,A=n.length,y,q=0;q<A;q++)y=a.defaultLinkTarget,void 0!=n[q].link_target&&(y=n[q].link_target), y=b('<a href="javascript:void(0);"><li rel="'+q+'" data-preview="'+n[q].preview+'" data-link="'+n[q].link+'" data-target="'+y+'" data-dblclick="0"><div class="offerType">'+n[q].type+'</div> <div class="offerLink">'+n[q].title+"</div></li></a>"),k.append(y);var e=a.barBg;r(a.barBg)&&(e="url("+a.barBg+")");p.css({background:e});n=0;A="100%";0<a.siteGridWidth&&(n="0 auto",A=a.siteGridWidth+"px");c.css({position:"relative",width:A,height:a.height+"px",margin:n});""!=a.logo&&(z.html('<a href="'+a.logoLink+ '" target="'+a.logoLinkTarget+'"><img src="'+a.logo+'" border="0"></a>'),z.css({top:a.logoTopPos+"px"}));t.css({width:a.selectorWidth+"px",background:a.selectorBg+"px",top:+a.selectorTopPos+"px",left:+a.selectorLeftPos+"px"});e=a.selectorBg;r(a.selectorBg)&&(e="url("+a.selectorBg+")");b("span",d).html(a.selectorText);d.css({background:e,color:a.selectorTextColorOFF,"font-size":a.selectorTextSize+"px"});d.mouseover(function(){b(this).css({color:a.selectorTextColorON});a.openListOnClick||(B(a,h),h.fadeIn("slow", "linear",function(){!a.openListOnClick&&k.height()<h.height()&&h.css({height:k.height()+"px"})}))});d.mouseout(function(){b(this).css({color:a.selectorTextColorOFF})});d.click(function(){a.openListOnClick&&(B(a,h),h.fadeToggle("slow","linear"))});h.mouseleave(function(){a.openListOnClick||(B(a,h),h.fadeOut("fast","linear"))});e=a.selectorArrow;r(a.selectorArrow)&&(e="url("+a.selectorArrow+")");b("span",v).html(a.selectorText);v.css({background:e+" "+a.selectorArrowBg});k.css({top:a.selectorItemsTopPos+ "px"});b("li",k).css({background:a.selectorItemBgColorOFF,"border-color":a.selectorItemBorderOFF});b(".offerLink",k).css({top:a.selectorItemTexTopPos+"px",left:a.selectorItemTexLeftPos+"px",color:a.selectorItemTextColorOFF,"font-size":a.selectorItemTextSize+"px"});b(".offerType",k).css({width:a.selectorItemTypeWidth+"px",background:a.selectorItemTypeBgColorOFF,color:a.selectorItemTypeTextColorOFF,"font-size":a.selectorItemTypeTextSize+"px"});b("li",k).click(function(){var a,c=b(this).attr("rel"); -1!=m.indexOf("ipad")||-1!=m.indexOf("iphone")||-1!=m.indexOf("ipod")||-1!=m.indexOf("webos")||-1!=m.indexOf("android")?(a=b("li",k),a.each(function(){b(this).attr("rel")!=c&&b(this).attr("data-dblclick",0)}),a=b(this).attr("data-dblclick"),a++,b(this).attr("data-dblclick",a),1<b(this).attr("data-dblclick")&&(b(this).attr("data-dblclick",0),D(this))):D(this)});b("li",k).mouseover(function(){var f=a,d=b(window).width();b(this).css({background:f.selectorItemBgColorON,"border-color":f.selectorItemBorderON}); b(".offerLink",this).css({color:f.selectorItemTextColorON});b(".offerType",this).css({background:f.selectorItemTypeBgColorON,color:f.selectorItemTypeTextColorON});var e=f.selectorLeftPos+f.previewLeftPos+2*f.previewBorderWidth;d>c.width()&&(e+=parseInt((d-c.width())/2,10));f.previewWidth=d-e<f.previewWidthOrig?d-e-10:f.previewWidthOrig;w.html('<img src="'+b(this).attr("data-preview")+'" style="width:'+f.previewWidth+"px; border:"+f.previewBorderWidth+"px solid "+f.previewBorderColor+'">')});b("li", k).mouseout(function(){b(this).css({background:a.selectorItemBgColorOFF,"border-color":a.selectorItemBorderOFF});b(".offerLink",this).css({color:a.selectorItemTextColorOFF});b(".offerType",this).css({background:a.selectorItemTypeBgColorOFF,color:a.selectorItemTypeTextColorOFF});w.html("")});w.css({top:a.previewTopPos+"px",left:a.previewLeftPos+"px"});s.css({display:a.showShare,top:a.shareTopPos+"px",right:a.shareRightPos+"px"});e=a.shareBgOFF;r(a.shareBgOFF)&&(e="url("+a.shareBgOFF+") no-repeat"); b("li",s).css({background:e});b("li",s).mouseover(function(){e=a.shareBgON;r(a.shareBgON)&&(e="url("+a.shareBgON+") no-repeat");b(this).css({background:e})});b("li",s).mouseout(function(){e=a.shareBgOFF;r(a.shareBgOFF)&&(e="url("+a.shareBgOFF+") no-repeat");b(this).css({background:e})});""!=a.closeBtn&&(u.html('<a href="javascript:void(0)" class="closeLink"><img src="'+a.closeBtn+'" border="0"></a>'),u.css({top:a.closeBtnTopPos+"px",right:a.closeBtnRightPos+"px"}),b(".closeLink",c).click(function(){p.slideToggle(250); b("body").css({"margin-top":x});if(0<a.cookieExpirationMinutes){var c=a.cookieExpirationMinutes,d=new Date;d.setTime(d.getTime()+6E4*c);c=escape("showProdBar")+(null==c?"":"; expires="+d.toUTCString());document.cookie=g+"="+c}else l.slideToggle(250)}));""!=a.openBtn&&(l.html('<a href="javascript:void(0)" class="openLink"><img src="'+a.openBtn+'" border="0"></a>'),l.css({width:"100%",top:"0px",right:"0px",position:"fixed","border-top":"1px solid "+a.openBtnBorderColor,margin:0,padding:0}),b("img", l).css({position:"absolute",right:"0px"}),b(".openLink",c).click(function(){p.slideToggle(250);l.slideToggle(250);E(a,x,x)}),l.detach().appendTo("body"));a.hideTopBarOnInit?(l.css({display:"none"}),b(".closeLink",c).click(),p.css({display:"none"})):l.css({display:"none"});var C=!1;b(window).resize(function(){a.responsive&&(!1!==C&&clearTimeout(C),C=setTimeout(function(){F(a,c,p,z,s,u,t,w,h)},300))});a.responsive&&F(a,c,p,z,s,u,t,w,h)})};b.fn.topBarPromoter.defaults={height:38,siteGridWidth:0,responsive:!0, hideTopBarOnInit:!1,openListOnClick:!1,logo:"preview_images/example1/logo.png",logoLink:"http://codecanyon.net/user/LambertGroup/portfolio?ref=LambertGroup",logoLinkTarget:"_blank",logoTopPos:8,barBg:"preview_images/example1/bar_pattern.jpg",defaultLinkTarget:"_self",showShare:!0,shareTopPos:7,shareRightPos:55,shareBgOFF:"preview_images/example1/social_icons/socialCircleOFF.png",shareBgON:"preview_images/example1/social_icons/socialCircleON.png",closeBtn:"preview_images/example1/closeBtn.png",closeBtnTopPos:9, closeBtnRightPos:8,cookieExpirationMinutes:0,openBtn:"preview_images/example1/openBtn.png",openBtnBorderColor:"#000000",previewWidth:590,previewWidthOrig:0,previewTopPos:29,previewLeftPos:300,previewBorderWidth:3,previewBorderColor:"#fe8426",selectorWidth:300,selectorTopPos:9,selectorLeftPos:140,selectorLeftPosOrig:0,selectorBg:"preview_images/example1/dropdown_pixel.png",selectorArrow:"preview_images/example1/dropdown_arrow.png",selectorArrowBg:"#F76C00",selectorText:"Choose An Offer",selectorTextColorOFF:"#333333", selectorTextColorON:"#F76C00",selectorTextSize:12,selectorItemsTopPos:0,selectorItemsHeight:0,selectorItemBgColorOFF:"#000000",selectorItemBgColorON:"#000000",selectorItemBorderOFF:"#797979",selectorItemBorderON:"#797979",selectorItemTexTopPos:12,selectorItemTexLeftPos:105,selectorItemTextColorOFF:"#797979",selectorItemTextColorON:"#FFFFFF",selectorItemTextSize:11,selectorItemTypeWidth:77,selectorItemTypeBgColorOFF:"#939393",selectorItemTypeBgColorON:"#f76c00",selectorItemTypeTextSize:10,selectorItemTypeTextColorOFF:"#000000", selectorItemTypeTextColorON:"#000000",theElements:[{title:"All-In-One Slider",type:"JQUERY",preview:"http://1.s3.envato.com/files/19756578/PREV_AllInOne.jpg",link:"http://www.responsivejqueryslider.com",link_target:"_blank"},{title:"All-In-One Slider WP",type:"WORDPRESS",preview:"http://2.s3.envato.com/files/22050325/PREV_AllInOneTouchWP.jpg",link:"http://www.responsivejqueryslider.com/wordpressplugin/index.html",link_target:"_blank"}]}})(jQuery);